---
title: 'Домашнее задание 1: Знакомство с R. Типы данных'
author: "ВПИШИТЕ ЗДЕСЬ ВАШИ ФИО"
---

***
Задания подготовил Андрей Захаров, НИУ ВШЭ


Выполните задания - впишите код в соответствующие ячейки. Чтобы проверить, как он работает, прогоните их.
За каждое правильно выполненное задание 1 балл.
Пришлите файлы c кодом, сораненные в Rmd и html- форматах (в их названиях должна быть ваша фамилия и номер домашней работы), а также файл в формате xlsx с результатами задания 8.

***

В этом домашнем задании мы работаем с примером данных ЦИАН о стоимости квартир. В задачах 1-7 воспроизводятся характеристики небольшой группы квартир, выставленных на продажу в декабре 2021 (север, запад, северо-запад Москвы). В заданиях 8-10 мы работаем с данными, обновленными на январь 2023 г. С ними можно познакомиться
[здесь](https://www.cian.ru/analiz-rynka-nedvizhimosti-b2b/) 


# Задание 1. Сделайте векторы (соблюдайте последовательность):
* `price` - цена квартиры, руб.: 14900000 9300000 13300000 11500000 17000000 23900000 11000000 29900000
* `area` - общая площадь квартиры, м2: 53.5 39 43 39.5 61.5 76.7 40 60

Выведите полученные векторы. Покажите тип данных.
```{r}
# ваш код здесь

```

# Задание 2. Сделайте факторы:
* `region` - округ Москвы: ЗАО ЗАО ЗАО САО СЗАО САО ЗАО САО
* `distance` - дистанция до метро: 10-15 более 15 10-15 более 15 до 10 до 10 до 10 до 10

Выведите полученные факторы (проверьте, что все закодировано правильно). Покажите тип данных.
```{r}
# ваш код здесь

```

# Задание 3. Вектор - операции, функции

* Сколько всего квартир выставлено на продажу?
```{r}
# ваш код здесь

```

* Переведите стоимость в тыс. долларов по курсу 1 долл = 70 руб - создайте новый вектор `price_doll`. Числа сделайте `integer` (в отличие от округления, функция отбросит десятичные знаки). Выведите полученный вектор.
```{r}
# ваш код здесь

```

* Какова разность между максимальной и минимальной стоимостью квартир в тыс. долл.?
```{r}
# ваш код здесь

```

* Сколько квартир выставлено на продажу в каждом округе?
```{r}
# ваш код здесь

```

# Задание 4. Вектор - индексы, условия

* Покажите стоимость квартир с 3ей по 5ую - в тыс. долл.
```{r}
# ваш код здесь

```

* Покажите площадь квартир 2, 4, 7, 8
```{r}
# ваш код здесь

```

* Посчитайте число квартир с удаленностью до 15 м до метро?
```{r}
# ваш код здесь

```

* Покажите площадь квартир меньше 50 м 
```{r}
# ваш код здесь

```

# Задание 5. Матрица

* Объедините векторы `price_doll`, `area` в матрицу `real_estate`. Строки - квартиры. Дайте имена столбцам. Покажите данные.
```{r}
# ваш код здесь

```
* Сколько строк и столбцов в матрице? Сколько всего ячеек?
```{r}
# ваш код здесь

```

* Покажите площадь 1, 5, 6 и 7 квартир  
```{r}
# ваш код здесь

```

# Задание 6. Матрица - операции, функции

* Добавьте к матрице столбец `views` - число просмотров: 569 451 1044 959 1095 413 488 421. Покажите матрицу.
```{r}
# ваш код здесь

```

* Рассчитайте для каждого столбца матрицы сумму и добавьте ее к матрице строкой. Выведите суммарные стоимость, площадь и просмотры продаваемого жилья
```{r}
# ваш код здесь

```

* Покажите % просмотров каждой квартиры от общего числа просмотров всех квартир (не выводите последнюю строку с суммой). Округлите до сотых (функция `round()`).

```{r}
# ваш код здесь

```

* Покажите стоимость и площадь квартир с максимальными просмотрами (не выводите последнюю строку с суммой)
```{r}
# ваш код здесь

```

# Задание 7. Условия, циклы

Вы ищете для покупателя квартиру площадью больше 50 $м^2$. Пройдите циклом `while` по площади квартир (помните, что вам не нужно брать последнюю строку). Если площадь подходит, то выведите индекс квартиры (строка), площадь и стоимость в тыс. долл. за 1 кв.м (надо рассчитать), округленную до сотых. Если квартира не подходит по площади, ничего делать не надо.

Вывод должен быть по примеру (каждая квартира с новой строки): 

1 квартира: 53.5 кв.м, 3.96 тыс.долл./кв.м

```{r}
# ваш код здесь

```

# Задание 8. Чтение и сохранение данных

Дальше мы работаем с описанием квартир в файле `Cian_Data_demo_b2b-2.xlsx`

* Загрузите нужную библиотеку.
* Какие листы в файле?

```{r}
# ваш код здесь

```

* Загрузите таблицу с листа "02-price_parsing" и сохраните в объект `prices2023`. Здесь представлено описание квартир на продаже в сегменте новостроек.

```{r}
# ваш код здесь

```

* Отберите и сохраните в таблице `prices2023` только квартиры, продающиеся в Москве, и только столбцы  "ID ЖК", "ID кв", "Комнат", "Площадь", "Цена", "Цена кв м", "Этаж", "Район Город", "АТД", "Класс К", "Застройщик", "Отделка К", "Сдача К"
* Выведите первые 10 наблюдений.

```{r}
# ваш код здесь

```

* Сохраните `prices2023` в отдельный файл xlsx с таким же именем. Заголовки столбцов должны идти первой строкой.

```{r}
# ваш код здесь

```


# Задание 9. Таблицы - операции и функции, знакомство с данными

* Выведите структуру данных. Какого типа переменные? Сколько всего переменных? Сколько наблюдений? Напишите ответ (кратко)

```{r}
# ваш код здесь

```

**Ответ:**

* Выведите описательную статистику для переменных, которые закодированы как количественные (кроме айди). Есть ли у них пропуски? Что вы можете сказать о распределении цены квартир? Напишите ответ (кратко).

```{r}
# ваш код здесь

```

**Ответ:**

* На сколько руб. различается средняя стоимость квадратного метра 2-комнатных квартир в ЗАО (переменная 'АТД') с полной и частичной отделкой?

```{r}
# ваш код здесь

```

* Делают ли в СВАО (переменная 'АТД') отделку в квартирах премиум и бизнес класса? На сколько кв. м  различается средняя площадь 3-комнатных квартир этих классов в СВАО (округлите до десятых)?

```{r}
# ваш код здесь

```


# Задание 10. Таблица - циклы, операции и функции с переменными

Сколько в округах Москвы (переменная 'АТД') квартир с разным числом комнат и какова у них медианная стоимость 1 кв метра в тыс. руб. с округлением до сотых (рассчитать из переменной 'Цена кв м')? Вывести результаты в разрезе по округам и кол-ву комнат. Использовать цикл `for`. Вывод должен быть по примеру:

[1] "ЮАО"
96 1 комнатных квартир, медианная цена 367.82 тыс.руб./кв.м 
13 2 комнатных квартир, медианная цена 312.06 тыс.руб./кв.м 
8 3 комнатных квартир, медианная цена 332.73 тыс.руб./кв.м 
[1] "ЗАО" 


```{r}
# ваш код здесь

```
